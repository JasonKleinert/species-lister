(this["webpackJsonpspecies-lister"]=this["webpackJsonpspecies-lister"]||[]).push([[0],{103:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),i=n(22),o=n.n(i),r=(n(89),n(90),n(109)),s=n(82),l=n(32),u=n(107),j=n(76),d=n(40),h=n(44),b=n(6),x=h.a.Option;function O(e){return Object(b.jsx)("div",{className:"iconic-taxa-selector",children:Object(b.jsxs)(h.a,{placeholder:"Select iconic taxa",value:e.iconicTaxa,allowClear:!0,style:{width:200},onChange:e.handleIconicTaxaChange,children:[Object(b.jsx)(x,{value:"Animalia",children:"Animalia"}),Object(b.jsx)(x,{value:"Amphibia",children:"Amphibia"}),Object(b.jsx)(x,{value:"Arachnida",children:"Arachnida"}),Object(b.jsx)(x,{value:"Aves",children:"Aves"}),Object(b.jsx)(x,{value:"Chromista",children:"Chromista"}),Object(b.jsx)(x,{value:"Fungi",children:"Fungi"}),Object(b.jsx)(x,{value:"Insecta",children:"Insecta"}),Object(b.jsx)(x,{value:"Mammalia",children:"Mammalia"}),Object(b.jsx)(x,{value:"Mollusca",children:"Mollusca"}),Object(b.jsx)(x,{value:"Reptilia",children:"Reptilia"}),Object(b.jsx)(x,{value:"Plantae",children:"Plantae"}),Object(b.jsx)(x,{value:"Protozoa",children:"Protozoa"})]})})}var p=n(108),m=h.a.Option;function f(e){return Object(b.jsxs)("div",{className:"location-controls",children:[Object(b.jsxs)(h.a,{placeholder:"Select location",value:e.location,allowClear:!0,onChange:e.handleSelectLocation,children:[Object(b.jsx)(m,{value:"30.092146220963105, -97.41695255909492",children:"Earth Native"}),Object(b.jsx)(m,{value:"26.2290,-97.3473",children:"Laguna Atascosa"})]}),Object(b.jsx)("h3",{children:"OR"}),Object(b.jsx)(p.a,{className:"location-button",type:"default",onClick:e.handleLocationButtonClick,children:"Use my current location"}),Object(b.jsx)("p",{className:"location-selected",children:e.location})]})}function g(e){return Object(b.jsxs)("div",{className:"lister-button",children:[Object(b.jsx)(p.a,{type:"primary",size:"large",onClick:e.handleListerButtonClick,children:"List Species"}),Object(b.jsx)(p.a,{type:"default",size:"large",onClick:e.handleClearListerButtonClick,children:"Start Over"})]})}var v=n(105),C=n(106);function L(e){return Object(b.jsxs)("div",{className:"species-list",children:[Object(b.jsx)(v.a,{orientation:"left",children:"".concat(e.speciesList.length," ").concat(e.iconicTaxa," Species")}),Object(b.jsx)(C.b,{dataSource:e.speciesList,renderItem:function(e){return Object(b.jsx)(C.b.Item,{children:e})}})]})}var S=n(62),k=n.n(S),y=n(78),N=function(){var e=Object(y.a)(k.a.mark((function e(t,n,c,a,i,o,r){var s,l,u,j,d;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),s="https://api.inaturalist.org/v1/observations?page=".concat(n,"&per_page=200&iconic_taxa=").concat(t,"&lat=").concat(a,"&lng=").concat(i,"&radius=").concat(o,"&quality_grade=research&order=desc&order_by=created_at"),console.log(s),e.next=5,fetch(s,{method:"GET",headers:{"Content-Type":"application/json"}});case 5:if((l=e.sent).ok){e.next=9;break}throw u="An error has occured: ".concat(l.status),new Error(u);case 9:return e.next=11,l.json();case 11:if(j=e.sent,r.push(j.results),console.log(j.results[j.results.length-1].created_at),n!==c){e.next=18;break}return e.abrupt("return",r);case 18:return d=n+1,e.abrupt("return",N(t,d,c,a,i,o,r));case 20:case"end":return e.stop()}}),e)})));return function(t,n,c,a,i,o,r){return e.apply(this,arguments)}}();function w(){var e=Object(c.useState)(),t=Object(l.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(),o=Object(l.a)(i,2),r=o[0],h=o[1],x=Object(c.useState)(50),p=Object(l.a)(x,2),m=p[0],v=p[1],C=Object(c.useState)(5),S=Object(l.a)(C,2),k=S[0],y=S[1],w=Object(c.useState)([]),A=Object(l.a)(w,2),T=A[0],_=A[1],B=Object(c.useState)(!1),I=Object(l.a)(B,2),E=I[0],F=I[1],P=function(e){var t=e.coords;h("".concat(t.latitude,", ").concat(t.longitude)),console.log("Your current position is:"),console.log("Latitude : ".concat(t.latitude)),console.log("Longitude: ".concat(t.longitude)),console.log("More or less ".concat(t.accuracy," meters."))},M=function(e){console.warn("ERROR(".concat(e.code,"): ").concat(e.message))};return Object(b.jsxs)("div",{className:"lister-content",children:[Object(b.jsx)(O,{iconicTaxa:n,handleIconicTaxaChange:function(e){a(e)}}),Object(b.jsx)(f,{location:r,handleLocationButtonClick:function(e){navigator.geolocation?navigator.geolocation.getCurrentPosition(P,M,{enableHighAccuracy:!0,timeout:5e3,maximumAge:0}):window.alert("Geolocation is not supported by this browser.")},handleSelectLocation:function(e){h(e)}}),Object(b.jsx)("div",{className:"search-radius-input",children:Object(b.jsx)(u.a,{min:1,max:200,defaultValue:m,formatter:function(e){return"".concat(e," km")},parser:function(e){return e.replace("km","")},onChange:function(e){v(e)}})}),Object(b.jsx)("div",{className:"numpages-input",children:Object(b.jsx)(u.a,{min:1,max:20,defaultValue:k,formatter:function(e){return"".concat(e," pgs")},parser:function(e){return e.replace("pgs","")},onChange:function(e){y(e)}})}),Object(b.jsx)(g,{handleListerButtonClick:function(e){console.log(r.split(",")[0]),F(!0),T&&_([]),N(n,1,k,r.split(",")[0],r.split(",")[1],m,[]).then((function(e){var t=function(e){var t=new Set;return e.forEach((function(e){e.forEach((function(e){e.taxon.preferred_common_name&&t.add(e.taxon.preferred_common_name)}))})),Object(s.a)(t).sort()}(e);_(t),F(!1)}))},handleClearListerButtonClick:function(e){_([]),a(null),h(null),v(50),y(5)}}),T.length?Object(b.jsx)(L,{speciesList:T,iconicTaxa:n}):E?Object(b.jsx)(j.a,{className:"spinner",size:"large",tip:"Gathering observations from iNaturalist..."}):Object(b.jsx)(d.a,{})]})}var A=r.a.Header;r.a.Footer;function T(){return Object(b.jsxs)(r.a,{className:"lister-layout",children:[Object(b.jsx)(A,{className:"lister-header",children:Object(b.jsx)("h1",{children:"Species Lister"})}),Object(b.jsx)(w,{})]})}var _=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(T,{})})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,110)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),i(e),o(e)}))};o.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(_,{})}),document.getElementById("root")),B()},89:function(e,t,n){},90:function(e,t,n){}},[[103,1,2]]]);
//# sourceMappingURL=main.ec9a43b7.chunk.js.map