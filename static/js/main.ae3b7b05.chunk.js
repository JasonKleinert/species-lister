(this["webpackJsonpspecies-lister"]=this["webpackJsonpspecies-lister"]||[]).push([[0],{103:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),i=n(22),r=n.n(i),o=(n(89),n(90),n(109)),s=n(82),l=n(32),u=n(107),j=n(76),d=n(40),h=n(44),b=n(6),O=h.a.Option;function p(e){return Object(b.jsx)("div",{className:"iconic-taxa-selector",children:Object(b.jsxs)(h.a,{placeholder:"Select iconic taxa",allowClear:!0,style:{width:200},onChange:e.handleIconicTaxaChange,children:[Object(b.jsx)(O,{value:"Animalia",children:"Animalia"}),Object(b.jsx)(O,{value:"Amphibia",children:"Amphibia"}),Object(b.jsx)(O,{value:"Arachnida",children:"Arachnida"}),Object(b.jsx)(O,{value:"Aves",children:"Aves"}),Object(b.jsx)(O,{value:"Chromista",children:"Chromista"}),Object(b.jsx)(O,{value:"Fungi",children:"Fungi"}),Object(b.jsx)(O,{value:"Insecta",children:"Insecta"}),Object(b.jsx)(O,{value:"Mammalia",children:"Mammalia"}),Object(b.jsx)(O,{value:"Mollusca",children:"Mollusca"}),Object(b.jsx)(O,{value:"Reptilia",children:"Reptilia"}),Object(b.jsx)(O,{value:"Plantae",children:"Plantae"}),Object(b.jsx)(O,{value:"Protozoa",children:"Protozoa"})]})})}var x=n(108),m=h.a.Option;function f(e){return Object(b.jsxs)("div",{className:"location-controls",children:[Object(b.jsxs)(h.a,{placeholder:"Select location",allowClear:!0,onChange:e.handleSelectLocation,children:[Object(b.jsx)(m,{value:"30.092146220963105, -97.41695255909492",children:"Earth Native"}),Object(b.jsx)(m,{value:"26.2290,-97.3473",children:"Laguna Atascosa"})]}),Object(b.jsx)("h3",{children:"OR"}),Object(b.jsx)(x.a,{className:"location-button",type:"default",onClick:e.handleLocationButtonClick,children:"Use my current location"}),Object(b.jsx)("p",{className:"location-selected",children:e.location})]})}function g(e){return Object(b.jsxs)("div",{className:"lister-button",children:[Object(b.jsx)(x.a,{type:"primary",size:"large",onClick:e.handleListerButtonClick,children:"List Species"}),Object(b.jsx)(x.a,{type:"default",size:"large",onClick:e.handleClearListerButtonClick,children:"Clear List"})]})}var v=n(105),C=n(106);function L(e){return Object(b.jsxs)("div",{className:"species-list",children:[Object(b.jsx)(v.a,{orientation:"left",children:"".concat(e.speciesList.length," ").concat(e.iconicTaxa," Species")}),Object(b.jsx)(C.b,{dataSource:e.speciesList,renderItem:function(e){return Object(b.jsx)(C.b.Item,{children:e})}})]})}var k=n(62),S=n.n(k),y=n(78),N=function(){var e=Object(y.a)(S.a.mark((function e(t,n,c,a,i,r,o){var s,l,u,j,d;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),s="https://api.inaturalist.org/v1/observations?page=".concat(n,"&per_page=200&iconic_taxa=").concat(t,"&lat=").concat(a,"&lng=").concat(i,"&radius=").concat(r,"&quality_grade=research&order=desc&order_by=created_at"),console.log(s),e.next=5,fetch(s,{method:"GET",headers:{"Content-Type":"application/json"}});case 5:if((l=e.sent).ok){e.next=9;break}throw u="An error has occured: ".concat(l.status),new Error(u);case 9:return e.next=11,l.json();case 11:if(j=e.sent,o.push(j.results),console.log(j.results[j.results.length-1].created_at),n!==c){e.next=18;break}return e.abrupt("return",o);case 18:return d=n+1,e.abrupt("return",N(t,d,c,a,i,r,o));case 20:case"end":return e.stop()}}),e)})));return function(t,n,c,a,i,r,o){return e.apply(this,arguments)}}();function w(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(""),r=Object(l.a)(i,2),o=r[0],h=r[1],O=Object(c.useState)(50),x=Object(l.a)(O,2),m=x[0],v=x[1],C=Object(c.useState)(5),k=Object(l.a)(C,2),S=k[0],y=k[1],w=Object(c.useState)([]),A=Object(l.a)(w,2),_=A[0],B=A[1],I=Object(c.useState)(!1),T=Object(l.a)(I,2),E=T[0],F=T[1],P=function(e){var t=e.coords;h("".concat(t.latitude,", ").concat(t.longitude)),console.log("Your current position is:"),console.log("Latitude : ".concat(t.latitude)),console.log("Longitude: ".concat(t.longitude)),console.log("More or less ".concat(t.accuracy," meters."))},M=function(e){console.warn("ERROR(".concat(e.code,"): ").concat(e.message))};return Object(b.jsxs)("div",{className:"lister-content",children:[Object(b.jsx)(p,{handleIconicTaxaChange:function(e){a(e)}}),Object(b.jsx)(f,{location:o,handleLocationButtonClick:function(e){navigator.geolocation?navigator.geolocation.getCurrentPosition(P,M,{enableHighAccuracy:!0,timeout:5e3,maximumAge:0}):window.alert("Geolocation is not supported by this browser.")},handleSelectLocation:function(e){h(e)}}),Object(b.jsx)("div",{className:"search-radius-input",children:Object(b.jsx)(u.a,{min:1,max:200,defaultValue:m,formatter:function(e){return"".concat(e," km")},parser:function(e){return e.replace("km","")},onChange:function(e){v(e)}})}),Object(b.jsx)("div",{className:"numpages-input",children:Object(b.jsx)(u.a,{min:1,max:20,defaultValue:S,formatter:function(e){return"".concat(e," pgs")},parser:function(e){return e.replace("pgs","")},onChange:function(e){y(e)}})}),Object(b.jsx)(g,{handleListerButtonClick:function(e){console.log(o.split(",")[0]),F(!0),_&&B([]),N(n,1,S,o.split(",")[0],o.split(",")[1],m,[]).then((function(e){var t=function(e){var t=new Set;return e.forEach((function(e){e.forEach((function(e){e.taxon.preferred_common_name&&t.add(e.taxon.preferred_common_name)}))})),Object(s.a)(t).sort()}(e);B(t),F(!1)}))},handleClearListerButtonClick:function(e){B([]),a(""),h(""),v(50),y(5)}}),_.length?Object(b.jsx)(L,{speciesList:_,iconicTaxa:n}):E?Object(b.jsx)(j.a,{className:"spinner",size:"large",tip:"Gathering observations from iNaturalist..."}):Object(b.jsx)(d.a,{})]})}var A=o.a.Header;o.a.Footer;function _(){return Object(b.jsxs)(o.a,{className:"lister-layout",children:[Object(b.jsx)(A,{className:"lister-header",children:Object(b.jsx)("h1",{children:"Species Lister"})}),Object(b.jsx)(w,{})]})}var B=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(_,{})})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,110)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),i(e),r(e)}))};r.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(B,{})}),document.getElementById("root")),I()},89:function(e,t,n){},90:function(e,t,n){}},[[103,1,2]]]);
//# sourceMappingURL=main.ae3b7b05.chunk.js.map